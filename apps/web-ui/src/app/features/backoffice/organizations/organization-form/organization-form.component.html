<div class="organization-form-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h3>{{ isEditMode ? 'Update organization information' : 'Add a new organization' }}</h3>
    </div>
  </div>

  <!-- Form and Debug Section -->
  <div class="form-and-debug-container">
    <!-- Form Section -->
    <div class="form-section">
      <app-form-debug-link
        [formGroup]="organizationForm"
        [title]="'Organization Form Debug'"
        [showValues]="true"
        [showErrors]="true"
        [showStatus]="true"
        [collapsed]="false"
        [linkText]="'Debug Form'"
        class="form-debug-link-top"
      ></app-form-debug-link>
      <form nz-form [formGroup]="organizationForm" (ngSubmit)="onSubmit()" [nzLayout]="'vertical'">
        <!-- Name Field -->
        <nz-form-item>
          <nz-form-label nzRequired>Organization Name</nz-form-label>
          <nz-form-control [nzErrorTip]="getFieldError('name')">
            <input
              nz-input
              formControlName="name"
              placeholder="Enter organization name"
              [class.error]="isFieldInvalid('name')"
            />
          </nz-form-control>
        </nz-form-item>

        <!-- Code Field -->
        <nz-form-item>
          <nz-form-label nzRequired>Organization Code</nz-form-label>
          <nz-form-control [nzErrorTip]="getFieldError('code')" nzExtra="A unique identifier for the organization (e.g., org-code)">
            <input
              nz-input
              formControlName="code"
              placeholder="Enter organization code"
              [class.error]="isFieldInvalid('code')"
            />
          </nz-form-control>
        </nz-form-item>

        <!-- Status Field -->
        <nz-form-item>
          <nz-form-label nzRequired>Status</nz-form-label>
          <nz-form-control [nzErrorTip]="getFieldError('status')">
            <nz-select
              formControlName="status"
              placeholder="Select organization status"
              [class.error]="isFieldInvalid('status')"
            >
              <nz-option
                *ngFor="let option of statusOptions"
                [nzLabel]="option.label"
                [nzValue]="option.value"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <!-- Form Actions -->
        <nz-form-item class="form-actions">
          <nz-form-control>
            <div class="form-action-buttons">
              <button
                nz-button
                type="button"
                (click)="onCancel()"
                [disabled]="loading"
              >
                <span nz-icon nzType="close"></span>
                Cancel
              </button>
              <button
                nz-button
                nzType="primary"
                type="submit"
                [nzLoading]="loading"
                [disabled]="organizationForm.invalid"
              >
                <span nz-icon nzType="save"></span>
                {{ isEditMode ? 'Update Organization' : 'Create Organization' }}
              </button>
            </div>
          </nz-form-control>
        </nz-form-item>
      </form>
    </div>
  </div>
</div>